---
title: "Kritaの開発進捗：2018年8月"
date: "2018-09-15"
categories: 
  - "news-jp"
---

昔は毎週の開発についての投稿をしていました。先週のKrita、といったハイライトです。ですが、維持するには忙しくなりすぎてしまいました。残念なことです。それでも、何か開発の進捗についてお知らせできればと思っています。[git history](https://github.com/KDE/krita)以外で！では、開発の進捗報告を復活させてみましょう…

8月には開発資金募集キャンペーンの準備を始めました。9月中旬から10月中旬まで、Kritaの開発の次の期間の資金を集めます。過去の資金募集キャンペーンは機能についてでしたが、今回は安定性と磨き上げることがメインです。**バグ数ゼロ**、というのは実現不可能ですが、それでもそう鬨の声を上げましょう！新しい支払機能プロバイダに移行して、paypalや直接の銀行送金以外でも[寄付](https://krita.org/jp/support-us-jp/donations-jp/)できるようにします。クレジットカード、各国の電子決済、ビットコインも使えるはずです。このシステムは既に[寄付ページ](/support-us/donations/)で公開されています！

既にユニットテストを修復することで安定性と機能洗練のスタートを切りました。新しいコードが機能を壊していないかをテストするコード群です。100個程度のバグも修正しました。また[Google Summer of Code](https://krita.org/jp/item/kritas-2018-google-summer-of-code-jp/)も終わりました。

ですが、それ以外のハイライトを見てみましょう。

### 磨いて、磨いて、磨く

KritaをQt5に移植してから、機能しないユニットテストが多数残されていました。ビルドできないもの、フリーズするもの、結果がおかしいものに、クラッシュするものなどです。8月は複雑な作業をするには暑すぎたので、これらを修正することにしました。もちろん、それ以外にも作業をしました。

### 選択の改善

皆さんからの寄付によって開発資金を得ているコア開発者の一人Dmitryが、この数週間Kritaの [選択機能の改善](https://phabricator.kde.org/T3920)の開発を行いました。Kritaにおける選択は他のアプリケーションとは少し変わっています。ローカルやグローバル選択があり、選択を点線だけではなくマスクとしても可視化できます。ピクセルオブジェクトとしての選択も、ベクターオブジェクトとしての選択も存在しています。以下のような内容の開発を行いました。

- 選択マスクのリアルタイムペイント
- ローカル選択を複数持てるように拡張
- グローバル選択に、不透明、不透明交差、不透明除去を追加
- グローバル選択の表示、を選択した時に自動的に選択を作成
- ベクター選択とピクセル選択の変換
- 選択の編集を可能に拡張

https://www.youtube.com/watch?v=gWv--Do9L0E

### リソース管理の書き直し

リソースはKritaで使うアイテムです。ブラシ先端もブラシプリセットもそうです。グラデーション、パターン、ワークスペースもリソースです。Kritaにデフォルトで同梱されるリソースもあれば、自分で作るものも、ダウンロードするものもあります。Kritaのリソースシステムは20世紀の遺物です。50ピクセルのブラシが**巨大**で、パターンは128 x 128 ピクセルだった時代のデザインです。今では、1000ピクセルのブラシに、5000ピクセルのパターンが大量に使用されています。

元々のリソース管理のデザインはこのスケールに対応できていません！そして20年のハック的開発により、ぐちゃぐちゃです。書き直すのは[大抵よくないこと](https://www.joelonsoftware.com/2000/04/06/things-you-should-never-do-part-i/)ですが…この部分を書き直す作業をしています。Boudewijnは開発を進めていますが、一般に公開されて見えるのは[Phabricatorのタスク](https://phabricator.kde.org/T379)くらいです。長年計画して議論している部分です。タグやリソース追加削除変更のバグのすべてがこれで解決することになるでしょう！

少なくとも、そういう計画です…道のりは遠いですが！

[![](/images/posts/2018/resource_db_explorer-300x145.png)](/images/posts/2018/resource_db_explorer.png)

また、サプライズもありました。

### 新しいサプライズ

Anna Medonosovaが素晴らしい新機能のガマットマスクを追加しました。アーティスティック色選択に、マスクの編集と適用機能を追加します。背景情報については[James Gurneyによるブログ記事を参照してください。](https://gurneyjourney.blogspot.com/2008/01/color-wheel-masking-part-1.html)

[![](/images/posts/2018/gamut-300x300.png)](/images/posts/2018/gamut.png)

また、デバッグログドッキングパネルが追加されたので、Windowsユーザーはdebug viewに苦労することはなくなりました。

[![](/images/posts/2018/log-docker-300x300.png)](/images/posts/2018/log-docker.png)(Artwork by [Iza Ka](http://LifeFinalEdited.pl))

他にもいろいろあります！Reptorianは様々な新しいブレンドモードを追加し、新しい選択交差モードも開発しています。 Jouniはリファレンス画像ドッキングパネルの問題を修正していて、[アニメーションのフレームクローン機能](https://phabricator.kde.org/T8764)も実装しました！
